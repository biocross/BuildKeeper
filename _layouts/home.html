---
layout: default
---

<style>
    .build-version {
        color: #2a7ae2;
        display: inline;
    }
    
    .build-date {
        font-size: 10px;
        color: gray;
        text-transform: uppercase;
    }
    
    .build {
        padding: 0.5rem 0;
        border-top: 1px solid #dee2e6;
    }
    
    .post-list>li {
        margin-bottom: 0;
    }
    
    .build-branch {
        font-size: 14px;
        color: gray;
    }
</style>

<script>
    if ((window.location.host.indexOf('ngrok') > -1) && (window.location.protocol != "https:")) {
        window.location.protocol = "https";
    }
</script>

<div class="home">
    {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1> 
    {%- endif -%} 
    
    <div>
        {%- if site.data.config.initialized != true -%}
        <h2>Hello!</h2>
        <br>
        <h6>Welcome to Librarian's web interface! Your builds will be listed here to be downloaded. </h6>
        <p> It's currently showing sample data, but you can start submitting your real builds to librarian using the command:
            <p><code> librarian submit &lt;pathToIPA&gt; [branch] [release_notes]</code> </p>
            where:
            <p>
                <ul>
                    <li><code>pathToIPA</code> is the path to the IPA file</li>
                    <li><code>branch</code> is the git branch the build is from <em>(Optional)</em></li>
                    <li><code>release_notes</code> are the release notes for the build <em>(Optional)</em></li>
                </ul>
            </p>

        </p>
        <br> 
    </div>
    
    {%- endif -%} 

    {%- if site.data.builds.size > 0 -%} {% assign sortedBuilds = site.data.builds | sort: 'date' | reverse %}
    <h2 class="post-list-heading">{{ page.list_title | default: "Builds" }}</h2>
    <ul class="post-list">
        {% for build in sortedBuilds limit: site.data.config.buildsToShow %}
        <li class="build">
            <div class="row">
                <div class="col-3 col-sm-4">
                    <span>
                        <h2 class="build-version align-baseline"> {{ build.version }} </h2>
                        <span class="align-text-bottom" style="font-size: 85%;">
                            ({{ build.buildNumber }})
                        </span>
                    </span>
                </div>
                <div class="col-9 col-sm-8">
                    <span class="float-right">
                        {%- if build.public -%}
                        <a href='itms-services://?action=download-manifest&url={{site.data.config.webBaseURL}}/assets/b/{{build.folderPath}}/web/manifest.plist'>
                            <button type="button" class="btn btn-outline-primary">
                                <i class="fas fa-cloud-download-alt"></i> Install </button>
                        </a>
                        {%- endif -%}
                        <a href='itms-services://?action=download-manifest&url={{site.data.config.webBaseURL}}/assets/b/{{build.folderPath}}/local/manifest.plist'>
                            <button type="button" class="btn btn-outline-warning">
                                <i class="fas fa-cloud-download-alt"></i> Install </button>
                        </a>
                    </span>
                </div>
            </div>
            <div class="build-branch"> RELEASE NOTES
                <br>
                <p style="margin-top: 0.5rem;">
                    {{ build.notes }}
                </p>
            </div>
            <div class="row">
                <div class="col-4 build-branch">
                    <i class="fas fa-code-branch"></i> {{build.branch}}
                </div>
                <div class="col-8 align-self-end">
                    <span class="build-date float-right">
                        <i class="far fa-clock"></i>
                        <strong> {{ build.date | timeago }} </strong> ({{ build.date | date: "%I:%M %p on %a, %d %b %Y" }}) </span>
                </div>
            </div>
        </li>
        {% endfor %}
    </ul>
    {%- endif -%}
</div>